<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Timothy Tieku Electrical ‚Äî Maintenance Booking</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --accent-1: #ffd700;
  --accent-2: #ff8a00;
  --accent-3: #ff3d00;
  --accent-4: #00d4ff;
  --glass-bg: rgba(255,255,255,0.18);
  --glass-border: rgba(255,255,255,0.3);
  --muted: rgba(255,255,255,0.85);
  --max-width: 900px;
}
*{box-sizing:border-box;}
html,body{height:100%;margin:0;font-family:"Poppins",sans-serif;color:#fff;}
body{
  display:flex;
  justify-content:center;
  align-items:center;
  background: url('images/electrician1.jpg') center/cover no-repeat;
  overflow-x:hidden;
}

.wrap{
  width:95%;
  max-width:var(--max-width);
  padding:40px;
  border-radius:25px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(18px) saturate(180%);
  box-shadow: 0 20px 50px rgba(0,0,0,0.7);
  display:flex;
  flex-direction:column;
  gap:30px;
}

h1{
  margin:0;
  font-size:2rem;
  background: linear-gradient(90deg,var(--accent-1),var(--accent-4));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.subtitle{font-size:1rem;color:var(--muted);}
label{font-size:1rem;font-weight:600;color:var(--accent-4);margin-bottom:6px;display:block;}
input, select, textarea{
  width:100%;
  padding:14px 16px;
  border-radius:15px;
  border:2px solid rgba(255,255,255,0.3);
  font-size:1rem;
  outline:none;
  background: rgba(255,255,255,0.95);
  color: #111;
  margin-bottom:12px;
  transition: all 0.3s ease;
}
input:focus, select:focus, textarea:focus{
  border:2px solid var(--accent-3);
  box-shadow: 0 0 15px rgba(255,61,0,0.5);
}
textarea{min-height:120px; resize:vertical;}
.actions{display:flex;gap:15px;flex-wrap:wrap;align-items:center;margin-top:10px;}
.btn{padding:14px 20px;border-radius:15px;font-weight:700;cursor:pointer;border:none;transition: transform 0.2s ease, box-shadow 0.2s ease;}
.btn-primary{background: linear-gradient(135deg,var(--accent-1),var(--accent-2)); color:#000; box-shadow:0 8px 25px rgba(255,138,0,0.5);}
.btn-primary:hover{transform: translateY(-3px); box-shadow:0 15px 40px rgba(255,138,0,0.7);}
.btn-ghost{background: linear-gradient(135deg,var(--accent-3),var(--accent-4)); color:#fff; border:1px solid rgba(255,255,255,0.3);}
.btn-ghost:hover{transform: translateY(-3px); box-shadow:0 12px 35px rgba(0,212,255,0.5);}
.whatsapp{background:#25D366;color:#fff;text-decoration:none;padding:14px 20px;border-radius:15px;font-weight:700;transition: transform 0.2s ease, box-shadow 0.2s ease;}
.whatsapp:hover{transform:translateY(-3px); box-shadow:0 10px 25px rgba(37,211,102,0.5);}
#statusMsg{font-weight:700;height:28px;margin-top:10px;text-align:center;font-size:1rem;}
.progress{height:10px;background:rgba(255,255,255,0.06);border-radius:8px;overflow:hidden;margin-bottom:18px;}
.progress span{display:block;height:100%;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));width:0%;transition:width 0.4s ease;}
.page{display:none;}
.page.active{display:block;}
</style>
</head>
<body>

<main class="wrap">
  <div>
    <h1>Timothy Tieku Electrical</h1>
    <div class="subtitle">Fast ‚Ä¢ Trusted ‚Ä¢ Professional electrical maintenance</div>
  </div>

  <div class="progress"><span id="progBar"></span></div>

  <form id="maintForm">
    <!-- Step 1 -->
    <div class="page active" id="page1">
      <label for="user_name">Full Name</label>
      <input id="user_name" type="text" name="user_name" placeholder="John Doe" required>
      <label for="user_phone">Phone Number</label>
      <input id="user_phone" type="tel" name="user_phone" placeholder="+233 54 389 9210" required>
      <label for="maintenance_type">Type of Maintenance</label>
      <select id="maintenance_type" name="maintenance_type" required>
        <option value="">‚Äî Choose service ‚Äî</option>
        <option>Wiring fault / repair</option>
        <option>Rewiring / new connection</option>
        <option>Lighting / fan installation</option>
        <option>Socket outlet installation</option>
        <option>Fuse box / circuit breaker</option>
        <option>Generator / inverter</option>
        <option>Appliance connection</option>
        <option>Solar PV / battery system</option>
        <option>Other</option>
      </select>
      <div class="actions">
        <button type="button" class="btn btn-primary" id="toStep2">Next ‚û°</button>
        <a class="whatsapp" id="whatsNow" href="#" target="_blank">üí¨ Quick WhatsApp</a>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="page" id="page2">
      <label for="user_email">Email Address</label>
      <input id="user_email" type="email" name="user_email" placeholder="you@example.com" required>
      <label for="audience_level">Priority</label>
      <select id="audience_level" name="audience_level" required>
        <option value="">‚Äî Priority ‚Äî</option>
        <option>Low (Flexible)</option>
        <option>Medium (2‚Äì3 Days)</option>
        <option>High (Urgent)</option>
      </select>
      <label for="preferred_datetime">Preferred Date & Time</label>
      <input id="preferred_datetime" type="datetime-local" name="preferred_datetime">
      <label for="message">Describe the Problem</label>
      <textarea id="message" name="message" placeholder="Describe your issue..."></textarea>
      <div class="actions">
        <button type="button" class="btn btn-ghost" id="backTo1">‚¨Ö Back</button>
        <button type="submit" class="btn btn-primary">Send Request</button>
        <a class="whatsapp" id="whatsLater" href="#" target="_blank">üí¨ Quick WhatsApp</a>
      </div>
    </div>

    <!-- Step 3: Status -->
    <div class="page" id="page3">
      <div id="statusMsg"></div>
      <div class="actions">
        <button type="button" class="btn btn-primary" id="backToStart">Back to Start</button>
      </div>
    </div>

  </form>
</main>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
emailjs.init("ad1dHGUf_gonZ5ERG"); // <-- replace

// Step controls
const page1=document.getElementById('page1');
const page2=document.getElementById('page2');
const page3=document.getElementById('page3');
const progBar=document.getElementById('progBar');

document.getElementById('toStep2').addEventListener('click',()=>{
  const name=document.getElementById('user_name').value.trim();
  const phone=document.getElementById('user_phone').value.trim();
  const type=document.getElementById('maintenance_type').value;
  if(!name||!phone||!type){alert("Fill all fields to continue."); return;}
  page1.classList.remove('active'); page2.classList.add('active');
  progBar.style.width='50%';
});

document.getElementById('backTo1').addEventListener('click',()=>{
  page2.classList.remove('active'); page1.classList.add('active');
  progBar.style.width='0%';
});

document.getElementById('backToStart').addEventListener('click',()=>{
  page3.classList.remove('active'); page1.classList.add('active');
  progBar.style.width='0%';
});

// WhatsApp Links
function updateWhatsNow(){
  const name=document.getElementById('user_name').value.trim()||"[name]";
  const phone=document.getElementById('user_phone').value.trim()||"[phone]";
  const type=document.getElementById('maintenance_type').value||"electrical assistance";
  document.getElementById('whatsNow').href="https://api.whatsapp.com/send?phone=233543899210&text="+encodeURIComponent(
    Hello Engineer Timothy Tieku, my name is ${name} and I need ${type}. Phone: ${phone}.
  );
}
function updateWhatsLater(){
  const name=document.getElementById('user_name').value.trim()||"[name]";
  const phone=document.getElementById('user_phone').value.trim()||"[phone]";
  const email=document.getElementById('user_email').value.trim()||"[email]";
  const priority=document.getElementById('audience_level').value||"[priority]";
  document.getElementById('whatsLater').href="https://api.whatsapp.com/send?phone=233543899210&text="+encodeURIComponent(
    Hello Engineer Timothy Tieku, my name is ${name}. Phone: ${phone}. Email: ${email}. Priority: ${priority}.
  );
}
['input','change'].forEach(e=>{document.getElementById('maintForm').addEventListener(e,()=>{
  updateWhatsNow(); updateWhatsLater();
});});
updateWhatsNow(); updateWhatsLater();

// Submit via EmailJS
document.getElementById('maintForm').addEventListener('submit',function(e){
  e.preventDefault();
  const name=document.getElementById('user_name').value.trim();
  const phone=document.getElementById('user_phone').value.trim();
  const type=document.getElementById('maintenance_type').value;
  const email=document.getElementById('user_email').value.trim();
  const priority=document.getElementById('audience_level').value;
  const datetime=document.getElementById('preferred_datetime').value || "Not specified";
  const message=document.getElementById('message').value.trim() || "No description provided";
  if(!name||!phone||!type||!email||!priority){alert("Fill all required fields."); return;}

  page2.classList.remove('active'); page3.classList.add('active');
  progBar.style.width='100%';
  const statusMsg=document.getElementById('statusMsg');
  statusMsg.style.color=var('--accent-1');
  statusMsg.textContent="Sending request...";

  const templateParams={user_name:name,user_phone:phone,maintenance_type:type,user_email:email,audience_level:priority,preferred_datetime:datetime,message:message};

  emailjs.send("service_972cf37","template_3epza38",templateParams)
    .then(()=>{statusMsg.style.color="#00ff90"; statusMsg.textContent="‚úÖ Request sent successfully!"; form.reset(); updateWhatsNow(); updateWhatsLater();})
    .catch((err)=>{console.error(err); statusMsg.style.color="#ff3d00"; statusMsg.textContent="‚ùå Failed to send request. Check EmailJS setup."});
});
</script>
</body>
</html>